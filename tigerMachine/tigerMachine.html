<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="referrer" content="no-referrer">
    <title>只因牌老虎机</title>
    <link rel="stylesheet" href="tigerMachine.css">
</head>
<body>
<div class="head">
    <span class="head_text">魔Shing老虎只因</span>
</div>
<div class="nav">
    <span class="tg O"><input type="text"><img src="" alt="" class="tgi"></span>
    <span class="tg T"><input type="text"><img src="" alt="" class="tgt"></span>
    <span class="tg Th"><input type="text"><img src="" alt="" class="tgw"></span>
</div>
<div class="Start">
    <button class="ClickToStart">
        <img class="manipulate" alt="点击摇奖" src="./img/抽奖ICON.png">
    </button>
</div>
<div class="bed">
    <div class="tips">点击摇奖</div>
</div>

<div class="footer">
    <div class="footer_tips">
        <span>当前概率:<br>金1%，<br>紫5%，<br>蓝8%，<br>白20%，<br>黑66%</span>
    </div>
    <div class="bed1">
        <p class="record"></p>
    </div>
</div>

<script>

    <!--    奖池内容-->
    const black = [
        {url: "./img/C宝物.png", name: "C宝物", alt: "黑"},
        {url: "./img/小白骨头.png", name: "小白骨头", alt: "黑"},
        {url: "./img/金令剑.png", name: "金令剑", alt: "黑"},
        {url: "./img/小刀.png", name: "小刀", alt: "黑"},
        {url: "./img/激光剑.png", name: "激光剑", alt: "黑"},
        {url: "./img/锤子.png", name: "锤子", alt: "黑"}
    ]
    const white = [
        {url: "./img/经验.png", name: "经验", alt: "白"},
        {url: "./img/忍博弈.png", name: "忍币", alt: "白"},
        {url: "./img/疯雯识.png", name: "风石头", alt: "白"},
        {url: "./img/银耀世.png", name: "银钥匙", alt: "白"},
        {url: "./img/火锤.png", name: "火锤", alt: "白"},
        {url: "./img/雷锤.png", name: "雷锤", alt: "白"},
        {url: "./img/鱼币.png", name: "鱼币", alt: "白"},
        {url: "./img/太刀.png", name: "太刀", alt: "白"}
    ]
    const blue = [
        {url: "./img/御灵符.png", name: "御灵符", alt: "蓝"},
        {url: "./img/B宝物.png", name: "B宝物", alt: "蓝"},
        {url: "./img/皮肤券.png", name: "皮肤券", alt: "蓝"},
        {url: "./img/自选雯识.png", name: "自选石头", alt: "蓝"},
        {url: "./img/神龙之血.png", name: "神龙之血", alt: "蓝"}
    ]
    const purple = [
        {url: "./img/A玄伤令.png", name: "A悬赏令", alt: "紫"},
        {url: "./img/雪舞琳碎片.png", name: "雪舞碎片", alt: "紫"},
        {url: "./img/S+玄伤令.png", name: "S+悬赏令", alt: "紫"},
        {url: "./img/S玄伤令.png", name: "S悬赏令", alt: "紫"},
        {url: "./img/狗三肥斩碎片.png", name: "狗三绯斩碎片", alt: "紫"},
        {url: "./img/狗三喂梨碎片.png", name: "狗三卫鲤碎片", alt: "紫"},
        {url: "./img/金耀石.png", name: "金钥匙", alt: "紫"},
        {url: "./img/解身福.png", name: "结神符", alt: "紫"},
        {url: "./img/撅醒石.png", name: "觉醒石", alt: "紫"},
        {url: "./img/熊猫阿力碎片.png", name: "阿力碎片", alt: "紫"},
        {url: "./img/紫金钥匙.png", name: "紫金钥匙", alt: "紫"}
    ]
    const gold = [
        {url: "./img/SS图卷.png", name: "SS图卷", alt: "金"},
        {url: "./img/SS憨病卷轴.png", name: "SS寒冰卷轴", alt: "金"},
        {url: "./img/SS沫隋.png", name: "SS墨髓", alt: "金"},
        {url: "./img/SS疯之届.png", name: "SS风戒指", alt: "金"},
        {url: "./img/SS鬼戒.png", name: "SS鬼戒", alt: "金"}
    ]
    // 获取图片塞入图片
    const tgi = document.querySelector(".tgi")
    const tgt = document.querySelector(".tgt");
    const tgw = document.querySelector(".tgw");
    // 新增保底次数
    let GoldArri = []
    let GoldArrt = []
    let GoldArrw = []
    // 定义规则
    /*
    * 金 1%  103
    * 紫 5%  1~5
    * 蓝 8%  6~14
    * 白 20% 15~35
    * 黑 66% 36~102*/


    // 获取点击摇奖按钮
    const startClick = document.querySelector(".ClickToStart");
    const manipulate = document.querySelector('.manipulate')
    startClick.addEventListener('mousedown', () => {
        manipulate.style.rotate = '-7deg'
        manipulate.style.transform = 'translateX(-10px)'
    })
    startClick.addEventListener('mouseup', () => {
        manipulate.style.rotate = '0deg'
        manipulate.style.transform = 'translateX(0)'
    })
    // 计数用
    let indexI
    let indexT
    let indexW
    // 三个窗口的随机数。
    let numRandom1
    let numRandom2
    let numRandom3
    // function Start(){
    startClick.addEventListener('click', () => {

            // 添加动画
            tgi.classList.add('scale')
            tgt.classList.add('scale')
            tgw.classList.add('scale')
            tgi.addEventListener('animationend', () => {
                tgi.classList.remove('scale')
            })
            tgt.addEventListener('animationend', () => {
                tgt.classList.remove('scale')
            })
            tgw.addEventListener('animationend', () => {
                tgw.classList.remove('scale')
            })


            // 设置随机数  1~102  每点击一次，生成一个random
            numRandom1 = Math.floor(Math.random() * 103) + 1
            numRandom2 = Math.floor(Math.random() * 103) + 1
            numRandom3 = Math.floor(Math.random() * 103) + 1
            // 每个对应颜色品级数组中的随机下标
            let blackR1 = Math.floor(Math.random() * black.length);
            let blackR2 = Math.floor(Math.random() * black.length);
            let blackR3 = Math.floor(Math.random() * black.length);
            let whiteR1 = Math.floor(Math.random() * white.length);
            let whiteR2 = Math.floor(Math.random() * white.length);
            let whiteR3 = Math.floor(Math.random() * white.length);
            let blueR1 = Math.floor(Math.random() * blue.length);
            let blueR2 = Math.floor(Math.random() * blue.length);
            let blueR3 = Math.floor(Math.random() * blue.length);
            let purpleR1 = Math.floor(Math.random() * purple.length);
            let purpleR2 = Math.floor(Math.random() * purple.length);
            let purpleR3 = Math.floor(Math.random() * purple.length);
            let goldR1 = Math.floor(Math.random() * gold.length);
            let goldR2 = Math.floor(Math.random() * gold.length);
            let goldR3 = Math.floor(Math.random() * gold.length);
            console.log('num1:' + numRandom1)
            console.log('num2:' + numRandom2)
            console.log('num3:' + numRandom3)
            console.log('blR1:' + blackR1)
            console.log('blR2:' + blackR2)
            console.log('blR3:' + blackR3)
            console.log('whiR1:' + whiteR1)
            console.log('whiR2:' + whiteR2)
            console.log('whiR3:' + whiteR3)
            console.log('blueR1:' + blueR1)
            console.log('blueR2:' + blueR2)
            console.log('blueR3:' + blueR3)
            console.log('purR1:' + purpleR1)
            console.log('purR2:' + purpleR2)
            console.log('purR3:' + purpleR3)
            console.log('goldR1:' + goldR1)
            console.log('goldR2:' + goldR2)
            console.log('goldR3:' + goldR3)

            // 保底机制
            GoldArri.push(`已经${10 - GoldArri.length - 1}次没有出金`)
            console.log(GoldArri)
            GoldArrt.push(`已经${10 - GoldArrt.length - 1}次没有出金`)
            console.log(GoldArri)
            GoldArrw.push(`已经${10 - GoldArrw.length - 1}次没有出金`)
            console.log(GoldArri)
            // 第十次 立马出金
            if (GoldArri.length === 10) {
                numRandom1 = 103
                GoldArri=[]
            }
            if (GoldArrt.length === 10) {
                numRandom2 = 103
                GoldArri=[]
            }
            if (GoldArrw.length === 10) {
                numRandom3 = 103
                GoldArri=[]
            }
            // ran1窗口
            if (36 <= numRandom1 && numRandom1 <= 102) {
                tgi.src = black[blackR1].url
                tgi.alt = black[blackR1].alt
                tgi.name = black[blackR1].name

                tgi.style.display = 'block'
                tgi.style.boxShadow = '2px 0 20px 8px black,inset 2px -2px 20px black'
                tgi.style.opacity = '1'
            }
            if (15 <= numRandom1 && numRandom1 <= 35) {
                tgi.src = white[whiteR1].url
                tgi.alt = white[whiteR1].alt
                tgi.name = white[whiteR1].name
                tgi.style.display = 'block'
                tgi.style.boxShadow = '2px 0 20px 8px white'
                tgi.style.opacity = '1'
            }
            if (14 <= numRandom1 && numRandom1 <= 6) {
                tgi.src = blue[blueR1].url
                tgi.alt = blue[blueR1].alt
                tgi.name = blue[blueR1].name

                tgi.style.display = 'block'
                tgi.style.boxShadow = '2px 0 20px 8px #4df5f5'
                tgi.style.opacity = '1'
            }
            if (1 <= numRandom1 && numRandom1 <= 5) {
                tgi.src = purple[purpleR1].url
                tgi.alt = purple[purpleR1].alt
                tgi.name = purple[purpleR1].name
                tgi.style.boxShadow = '2px 0 20px 8px purple'

                tgi.style.display = 'block'
                tgi.style.opacity = '1'
            }
            if (numRandom1 === 103) {
                tgi.src = gold[goldR1].url
                tgi.alt = gold[goldR1].alt
                tgi.name = gold[goldR1].name
                //如果出金，则清空幸运值
                indexI = (10 - GoldArri.length - 1)
                GoldArri=[]
                tgi.style.display = 'block'
                tgi.style.opacity = '1'
                tgi.style.boxShadow = '2px 0 200px 30px yellow'
            }
            //ran2窗口
            if (36 <= numRandom2 && numRandom2 <= 102) {
                tgt.src = black[blackR2].url
                tgt.alt = black[blackR2].alt
                tgt.name = black[blackR2].name

                tgt.style.boxShadow = '2px 0 20px 8px black,inset 2px -2px 20px black'
                tgt.style.display = 'block'
                tgt.style.opacity = '1'
            }
            if (15 <= numRandom2 && numRandom2 <= 35) {
                tgt.src = white[whiteR2].url
                tgt.alt = white[whiteR2].alt
                tgt.name = white[whiteR2].name

                tgt.style.display = 'block'
                tgt.style.boxShadow = '2px 0 20px 8px white'
                tgt.style.opacity = '1'
            }
            if (14 <= numRandom2 && numRandom2 <= 6) {
                tgt.src = blue[blueR2].url
                tgt.alt = blue[blueR2].alt
                tgt.name = blue[blueR2].name

                tgt.style.boxShadow = '2px 0 20px 8px #4df5f5'
                tgt.style.display = 'block'
                tgt.style.opacity = '1'
            }
            if (1 <= numRandom2 && numRandom2 <= 5) {
                tgt.src = purple[purpleR2].url
                tgt.alt = purple[purpleR2].alt
                tgt.name = purple[purpleR2].name

                tgt.style.display = 'block'
                tgt.style.boxShadow = '2px 0 20px 8px purple'
                tgt.style.opacity = '1'
            }
            if (numRandom2 === 103) {
                tgt.src = gold[goldR2].url
                tgt.alt = gold[goldR2].alt
                tgt.name = gold[goldR2].name
                //如果出金，则清空幸运值

                indexT = (10 - GoldArrt.length - 1)
                GoldArrt=[]
                tgt.style.display = 'block'
                tgt.style.opacity = '1'
                tgt.style.boxShadow = '0 0 200px 80px yellow'
            }
            //     ran3窗口
            if (36 <= numRandom3 && numRandom3 <= 102) {
                tgw.src = black[blackR3].url
                tgw.alt = black[blackR3].alt
                tgw.name = black[blackR3].name

                tgw.style.display = 'block'
                tgw.style.boxShadow = '2px 0 20px 8px black,inset 2px -2px 20px black'
                tgw.style.opacity = '1'
            }
            if (15 <= numRandom3 && numRandom3 <= 35) {
                tgw.src = white[whiteR3].url
                tgw.alt = white[whiteR3].alt
                tgw.name = white[whiteR3].name

                tgw.style.boxShadow = '2px 0 20px 8px white'
                tgw.style.display = 'block'
                tgw.style.opacity = '1'
            }
            if (14 <= numRandom3 && numRandom3 <= 6) {
                tgw.src = blue[blueR3].url
                tgw.alt = blue[blueR3].alt
                tgw.name = blue[blueR3].name
                tgw.style.boxShadow = '2px 0 20px 8px #4df5f5'
                tgw.style.display = 'block'
                tgw.style.opacity = '1'
            }
            if (1 <= numRandom3 && numRandom3 <= 5) {
                tgw.src = purple[purpleR3].url
                tgw.alt = purple[purpleR3].alt
                tgw.name = purple[purpleR3].name

                tgw.style.display = 'block'
                tgw.style.boxShadow = '2px 0 20px 8px purple'
                tgw.style.opacity = '1'
            }
            if (numRandom3 === 103) {
                tgw.src = gold[goldR3].url
                tgw.alt = gold[goldR3].alt
                tgw.name = gold[goldR3].name
                tgw.style.opacity = '1'
                //如果出金，则清空幸运值

                indexW = (10 - GoldArrw.length - 1)
                GoldArrw=[]
                tgw.style.boxShadow = '2px 0 200px 80px yellow'
            }
            GoldArri.length;
            GoldArrt.length;
            GoldArrw.length;
            const record = document.querySelector('.record')
            record.innerHTML = `
    <p class="inTip">当前奖品内容:</p><br>
    距离下次出金:${10 - GoldArri.length}次,${10 - GoldArrt.length}次,${10 - GoldArrw.length}次<br>
    ${tgi.alt}色:<span class="rc">${tgi.name}</span><br>
    ${tgt.alt}色:<span class="rc">${tgt.name}</span><br>
    ${tgw.alt}色:<span class="rc">${tgw.name}</span><br>
    `
            indexI++;
            indexT++
            indexW++
        }
    )
    //     }
    // Start()

</script>
</body>
</html>